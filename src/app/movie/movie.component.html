<app-search-bar (onSearch)="onSearch($event)"></app-search-bar>
<app-nav-menu (onNavMenuChange)="onNavMenuChange($event)" (showLoading)="showLoading($event)"></app-nav-menu>
<app-loader [loading]="loading"></app-loader>

<div class="ngmp-main-container">
    <div *ngIf="movies; else elseBlock" class="ngmp-movies-container">
        <div class="ngmp-movies-list-header">
            <span class="ngmp-movies-count">
                {{movies.length}} Movies
            </span>
            <div class="ngmp-movies-sort">
                SORT BY:
                <select [(ngModel)]="sortBy">
                    <option value="rate">Rate</option>
                    <option value="id">Lastest</option>
                </select>
            </div>
        </div>
        <hr>
        <div class="ngmp-movies-list">
            <div *ngFor="let movie of movies" class="ngmp-movie">
                <a [routerLink]="['/movies/' + movie.Type + '/' + movie.imdbID]">
                    <div *ngIf="(movie.Poster === MOVIE_PROPS.NO_IMG_URL || null);  else elseBlock"
                        class="ngmp-noimageposter">
                        <img src="assets/icons/notfound.svg" alt="search icon" class="ngmp-noimage">
                    </div>
                    <ng-template #elseBlock>
                        <figure>
                            <img src="{{movie.Poster}}" alt="movie poster" class="ngmp-poster">
                        </figure>
                    </ng-template>

                    <h3 class="ngmp-movie-title">{{movie.Title}}</h3>
                    <p class="ngmp-movie-year">
                        <img src="assets/icons/star.svg" alt="movie poster" class="ngma-rateimg">
                        {{movie.Year}}</p>
                </a>
            </div>
        </div>
    </div>
    <ng-template #elseBlock>
        <app-no-data></app-no-data>
    </ng-template>
</div>